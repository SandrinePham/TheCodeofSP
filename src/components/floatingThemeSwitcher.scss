@use "../styles/univers/foundation/foundation.scss" as f;

/* ==========================================
   üß≠ FLOATING THEME SWITCHER ‚Äî Optimis√©
========================================== */
.floating-switcher {
  position: fixed;
  bottom: f.$spacing-l;
  right: f.$spacing-l;
  z-index: 2000;

  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: f.$spacing-xs;

  transition: transform var(--transition-medium) ease-out;

  /* -------------------------------------
     üîò BOUTON PRINCIPAL
  ------------------------------------- */
  &__toggle {
    cursor: pointer;
    background: none;
    border: none;
    padding: 0;
    outline: none;

    display: flex;
    align-items: center;
    justify-content: center;

    width: 100px;
    height: 100px;

    @media (max-width: f.$mobile) {
      width: 80px;
      height: 80px;
    }

    

    border-radius: 6px;
    box-shadow: var(--shadow-medium);

    transition: transform var(--transition-fast),
      box-shadow var(--transition-fast);

    img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform var(--transition-fast);
      pointer-events: none;
    }

    &:hover img {
      transform: scale(1.1);
    }

    &:active img {
      transform: scale(0.95);
    }
  }

  /* -------------------------------------
     üéõÔ∏è LISTE DES OPTIONS (Ferm√©e)
  ------------------------------------- */
  &__options {
    position: absolute;
    right: calc(100% + 10px);
    top: 50%;
    transform: translateY(-50%) translateX(10px);
    
    display: flex;
    flex-direction: column;
    gap: f.$spacing-xs;

    opacity: 0;
    pointer-events: none;
    transition: opacity var(--transition-medium),
      transform var(--transition-medium);
  }

  .theme-btn {
    opacity: 0;
    transform: translateY(8px);
    transition: opacity var(--transition-medium),
      transform var(--transition-medium);

    background: var(--background-header);
    padding: f.$spacing-xs f.$spacing-s;
    border-radius: 8px;
    border: none;
    font-family: var(--font-title);
    font-size: 0.9rem;
    cursor: pointer;
    white-space: nowrap;
  }

  /* -------------------------------------
     üü¢ √âTAT OUVERT (React)
  ------------------------------------- */
  &.open {
    .floating-switcher__options {
      opacity: 1;
      transform: translateY(-50%) translateX(0);
      pointer-events: auto;
    }

    .theme-btn {
      opacity: 1;
      transform: translateY(0);

      // Animation en cascade
      @for $i from 1 through 5 {
        &:nth-child(#{$i}) {
          transition-delay: $i * 0.05s;
        }
      }
    }
  }

  /* ======================================
     üé® THEMES
  ====================================== */

  /* ------ ACCUEILLANT ------ */
  .theme-accueillant & {
    &__toggle {
      background-color: var(--background-header);

      &:hover {
        @include f.btn-hover-accueillant;
      }
    }

    .theme-btn {
      background-color: var(--background-header);
      color: var(--secondary-color);

      &:hover {
        @include f.btn-hover-accueillant;
      }

      &.active {
        @include f.btn-active-accueillant;
      }
    }
  }

  /* ------ √âNERGIQUE ------ */
  .theme-energique & {
    &__toggle {
      background: radial-gradient(circle, var(--accent-color), var(--primary-color));
      color: var(--main-color);
      &:hover {
        @include f.floatingSwitcher-hover-energique;
      }
    }

    .theme-btn {
      background: rgba(var(--background-main-rgb), 0.8);
      color: var(--primary-color);
      border: 1px solid var(--primary-color);

      &:hover {
        @include f.btn-hover-energique;
      }

      &.active {
        @include f.btn-active-energique;
      }
    }
  }

  /* ------ MINIMALISM ------ */
  .theme-minimalism & {
    &__toggle {
      background: var(--background-header);
      color: var(--color-main);
      box-shadow: var(--shadow-light);

      &:hover {
        @include f.btn-hover-minimalism;
      }
    }

    .theme-btn {
      background: var(--background-header);
      color: var(--color-main);
      border: 1px solid rgba(var(--color-main-rgb), 0.2);

      &:hover {
        @include f.btn-hover-minimalism;
      }

      &.active {
        @include f.btn-active-minimalism;
      }
    }
  }
}

/* ======================================
   üì± RESPONSIVE
====================================== */

@media (max-width: f.$mobile) {
  .floating-switcher {
    right: f.$spacing-m;
    bottom: f.$spacing-m;

    &__options {
      right: 50%;
      top: -10px;
      transform: translateX(50%) translateY(-10px);
    }

    &.open .floating-switcher__options {
      transform: translateX(50%) translateY(-10px);
    }
  }
}
